<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>CICD on eri24816's blog</title><link>https://eri24816.github.io/blog_2/tags/cicd/</link><description>Recent content in CICD on eri24816's blog</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><lastBuildDate>Mon, 18 Nov 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://eri24816.github.io/blog_2/tags/cicd/index.xml" rel="self" type="application/rss+xml"/><item><title>用 Jenkins 部屬 Docker 應用程式</title><link>https://eri24816.github.io/blog_2/post/jenkins-docker/</link><pubDate>Mon, 18 Nov 2024 00:00:00 +0000</pubDate><guid>https://eri24816.github.io/blog_2/post/jenkins-docker/</guid><description>我用 Vue 和 Python 做了 AI 生成音樂的應用程式，然後用 Jenkins 讓每個 commit 自動從 GitHub pull 下來並佈署到 server，非常方便。
安裝 Docker 和 Jenkins 前置作業是要在 server 上安裝 Docker 和 Jenkins。不過有人幫我裝好了，所以這裡不寫細節。
新增 Jenkinsfile 和 Dockerfile 首先要在 git repo 裡面新增 Jenkinsfile 和 Dockerfile。
Jenkinsfile 用來描述每次有新 commit 要做的三件事: build image、刪掉舊 container、跑新 container。
pipeline { agent any stages { stage(&amp;#39;Build&amp;#39;) { steps { script { sh &amp;#39;docker build -t midi-gen .&amp;#39; } } } stage(&amp;#39;Run&amp;#39;) { steps { script { sh &amp;#39;docker ps -qa --filter &amp;#34;name=midi-gen&amp;#34; | grep -q .</description></item></channel></rss>